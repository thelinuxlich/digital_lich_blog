[{"slug":"the-cheapest-tech-blog-setup","category":"blog","title":"The Cheapest Tech Blog Setup","description":"We're excited to announce Astro as a new way to build static websites and deliver lightning-fast performance without sacrificing a modern developer experience.","tags":["astro","fly.io","gisqus","blog","static","jamstack","umami"],"body":"\nWhat better way to start than with a post about how I set up this blog? I'm going to explain the tools I used to build it, and how I set them up. I'll also go over the costs of each tool, and how I'm keeping the costs down.\n\n## Wishlist\n\nI wanted to build a blog with the following features:\n\n- Registered domain\n- Static site generator\n- Comments\n- Analytics\n- Cheap\n\nEasy enough, right? Let's get started.\n\n## Domain\n\nI registered this domain with [Porkbun](https://porkbun.com/) and found a coupon code (AWESOMENESS) to get it for $9. The experience was pretty straightforward, it set up the HTTPS certificate for me, auto-renewal, and all the usual stuff.\n\n## Static Site Generator\n\nI'm more of a backend guy, but sometimes I get my hands dirty with frontend stuff. I've used [Jekyll](https://jekyllrb.com/) before, but I wanted to try something new. I found [Astro](https://astro.build/) and it looked pretty cool. \nIt has all the features I needed in a SSG: Markdown support, sitemap, RSS feed, prefetching, SEO integration and [nice themes](https://astro.build/themes).\n\nI chose a theme and run the following commands to get started:\n```shell\nnpm create astro@latest --template robertguss/Astro-Theme-Creek#master\nnpm run dev\n```\n\nThen I changed everything I needed and created a Dockerfile to deploy it to Fly.io:\n```dockerfile\nFROM pierrezemb/gostatic:latest \nCOPY ./dist /srv/http\nEXPOSE 8080\nCMD [\"-port\", \"8080\"]\n```\nSomething to note here is that Astro doesn't have instructions for deployment on Fly.io, which I think is a bit weird. Anyway, I just copied the contents of the _dist_ folder to the Docker image and it worked.\n\nWhy Fly.io? I never used it before so I got the perfect excuse to test it. The hobby tier is pretty generous, you get 3 VMs with 256MB of RAM each, 3GB of storage and 160GB of bandwidth. For this use case, it seems they wake up the VMs only when I need to deploy something.\n\nFly.io deployment is a breeze too:\n```shell\ncurl -L https://fly.io/install.sh | sh\nfly auth signup\nfly launch\n```\nThe launch command will generate a _fly.toml_ file with the configuration for your app. I just had to point to my Dockerfile in the file and I could deploy it later with:\n```shell \nflyctl deploy\n```\n\nI've also added a Github Action to setup automatic deployment when pushing to the _main_ branch:\n```yaml\nname: Fly Deploy\non:\n  push:\n    branches:\n      - master\njobs:\n  deploy:\n    name: Deploy app\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '16'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm run build\n      - uses: superfly/flyctl-actions/setup-flyctl@master\n      - run: flyctl deploy --remote-only\n        env: \n          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}\n```\n\nAfter setting the domain in Fly.io dashboard I had the basics of my blog ready to go.\n\n## Comments\n\nThere are some options for Jamstack sites to add comments, Disqus being the most popular. However, everyone seems to be moving away from it because of privacy concerns, slowness and those pesky ads. In my quest for the cheapest tech blog, I found [Gisqus](https://giscus.app/), which fits like a glove, it requires Github signin to comment, but it's okay for my audience, a small price for something so neat.\n\nThe only thing you need is to add a script tag in your HTML, a div with the _gisqus_ class and enable Github Discussions on the blog repository. Feels like magic ðŸ§™â€â™‚ï¸\n\n## Analytics\n\nI wanted some simple analytics, just to know how many people are visiting the blog and what they're reading. I found [Umami](https://umami.is/), which can be self-hosted but I'm okay with the free tier(10k pageviews).\nSetup is just adding a script tag to the head of your HTML and optionally adding events to track.\n\n## Cheap\n\nI'm using the free tier of Fly.io and Umami, Gisqus is backendless so the only thing I'm paying for is the domain. $9/year is pretty cheap for a tech blog, right? And if someday I need some database features, I can use [PocketHost](https://pockethost.io/), a cloud service for [PocketBase](https://pocketbase.io/) which is also free and deserves its own future post.\n\n## Conclusion\n\nIf you wanna see the blog repository, it's open and you can find it [here](https://github.com/thelinuxlich/digital_lich_blog). I hope it helps you achieve your own cheap tech blog â­\n\n> I'm just a enthusiast and didn't receive anything to write this post, I just wanted to share my experience with these tools."}]